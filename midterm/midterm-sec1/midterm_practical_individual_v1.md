# ğŸ’» ENGSE207 Software Architecture - MIDTERM PRACTICAL EXAM (Individual)
## à¸‚à¹‰à¸­à¸ªà¸­à¸šà¸›à¸à¸´à¸šà¸±à¸•à¸´à¹€à¸”à¸µà¹ˆà¸¢à¸§ - Version 1

---

### ğŸ“‹ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¸ªà¸­à¸š
- **à¸£à¸«à¸±à¸ªà¸§à¸´à¸Šà¸²:** ENGSE207
- **à¸Šà¸·à¹ˆà¸­à¸§à¸´à¸Šà¸²:** à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸‹à¸­à¸Ÿà¸•à¹Œà¹à¸§à¸£à¹Œ (Software Architecture)
- **à¸›à¸£à¸°à¹€à¸ à¸—à¸‚à¹‰à¸­à¸ªà¸­à¸š:** à¸›à¸à¸´à¸šà¸±à¸•à¸´à¹€à¸”à¸µà¹ˆà¸¢à¸§ (Individual Practical)
- **à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰:** 180 à¸™à¸²à¸—à¸µ (3 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡)
- **à¸„à¸°à¹à¸™à¸™à¹€à¸•à¹‡à¸¡:** 15 à¸„à¸°à¹à¸™à¸™
- **à¸£à¸¹à¸›à¹à¸šà¸š:** Open Book, Open Internet, Open AI

---

### ğŸ‘¤ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²

**à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥:** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

**à¸£à¸«à¸±à¸ªà¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²:** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

**à¸«à¸¡à¸¹à¹ˆà¹€à¸£à¸µà¸¢à¸™:** \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

---

## ğŸ“Œ à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œà¹‚à¸ˆà¸—à¸¢à¹Œ

à¸šà¸£à¸´à¸©à¸±à¸— TechStartup à¸¡à¸µà¸£à¸°à¸šà¸š **Library Management System (à¸£à¸°à¸šà¸šà¸ˆà¸±à¸”à¸à¸²à¸£à¸«à¹‰à¸­à¸‡à¸ªà¸¡à¸¸à¸”)** à¹à¸šà¸š Monolithic à¸—à¸µà¹ˆà¸à¸³à¸¥à¸±à¸‡à¹€à¸£à¸´à¹ˆà¸¡à¸¡à¸µà¸›à¸±à¸à¸«à¸²:

### ğŸ”´ à¸›à¸±à¸à¸«à¸²à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™:

1. **Code à¸¢à¸¸à¹ˆà¸‡à¹€à¸«à¸¢à¸´à¸‡** - à¹‚à¸„à¹‰à¸”à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¹„à¸Ÿà¸¥à¹Œà¹€à¸”à¸µà¸¢à¸§ (server.js) à¸¡à¸²à¸à¸à¸§à¹ˆà¸² 400 à¸šà¸£à¸£à¸—à¸±à¸”
2. **à¸¢à¸²à¸à¸•à¹ˆà¸­à¸à¸²à¸£à¸šà¸³à¸£à¸¸à¸‡à¸£à¸±à¸à¸©à¸²** - à¹à¸à¹‰à¹‚à¸„à¹‰à¸”à¸ªà¹ˆà¸§à¸™à¸«à¸™à¸¶à¹ˆà¸‡ à¸•à¹‰à¸­à¸‡à¸£à¸°à¸§à¸±à¸‡à¹„à¸¡à¹ˆà¹ƒà¸«à¹‰à¸à¸£à¸°à¸—à¸šà¸ªà¹ˆà¸§à¸™à¸­à¸·à¹ˆà¸™
3. **à¸—à¸³à¸‡à¸²à¸™à¸£à¹ˆà¸§à¸¡à¸à¸±à¸™à¸¢à¸²à¸** - Developer à¸«à¸¥à¸²à¸¢à¸„à¸™à¹à¸à¹‰à¹„à¸Ÿà¸¥à¹Œà¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸™ à¹€à¸à¸´à¸” conflict à¸šà¹ˆà¸­à¸¢
4. **à¹„à¸¡à¹ˆà¸¡à¸µ Separation of Concerns** - Business logic à¸›à¸™à¸à¸±à¸š Data access à¸›à¸™à¸à¸±à¸š HTTP handling

### ğŸ¯ à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢:

à¸„à¸¸à¸“à¹„à¸”à¹‰à¸£à¸±à¸šà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¹ƒà¸«à¹‰ **Refactor** à¸£à¸°à¸šà¸šà¸ˆà¸²à¸ **Monolithic** à¹€à¸›à¹‡à¸™ **Layered Architecture (3-tier)** à¹€à¸à¸·à¹ˆà¸­:
- âœ… à¹à¸¢à¸ Concerns à¸Šà¸±à¸”à¹€à¸ˆà¸™ (Presentation, Business, Data)
- âœ… à¸‡à¹ˆà¸²à¸¢à¸•à¹ˆà¸­à¸à¸²à¸£à¸šà¸³à¸£à¸¸à¸‡à¸£à¸±à¸à¸©à¸²
- âœ… à¸—à¸µà¸¡à¸ªà¸²à¸¡à¸²à¸£à¸–à¸—à¸³à¸‡à¸²à¸™à¹à¸¢à¸à¸à¸±à¸™à¹„à¸”à¹‰ (à¹à¸•à¹ˆà¸¥à¸° layer)
- âœ… à¹€à¸•à¸£à¸µà¸¢à¸¡à¸à¸£à¹‰à¸­à¸¡à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸‚à¸¢à¸²à¸¢à¸£à¸°à¸šà¸šà¹ƒà¸™à¸­à¸™à¸²à¸„à¸•

---

## ğŸ’» à¹‚à¸„à¹‰à¸”à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™ (Monolithic - à¸¡à¸µà¸›à¸±à¸à¸«à¸²)

### à¹„à¸Ÿà¸¥à¹Œ: `server.js` (Monolithic)

```javascript
// server.js - Monolithic Library Management System
const express = require('express');
const sqlite3 = require('sqlite3').verbose();
const app = express();

app.use(express.json());
app.use(express.static('public'));

// Database connection (à¸›à¸™à¸à¸±à¸šà¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡)
const db = new sqlite3.Database('./library.db', (err) => {
    if (err) console.error('Database error:', err);
    else console.log('Connected to SQLite database');
});

// Create tables if not exists
db.run(`CREATE TABLE IF NOT EXISTS books (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    author TEXT NOT NULL,
    isbn TEXT UNIQUE NOT NULL,
    status TEXT DEFAULT 'available',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
)`);

// ===== API ENDPOINTS =====

// GET /api/books - à¸”à¸¶à¸‡à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
app.get('/api/books', (req, res) => {
    // Validation (à¸›à¸™à¸à¸±à¸š HTTP handling)
    const { status } = req.query;
    
    // Database query (à¸›à¸™à¸à¸±à¸šà¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡)
    let sql = 'SELECT * FROM books';
    let params = [];
    
    if (status) {
        sql += ' WHERE status = ?';
        params.push(status);
    }
    
    db.all(sql, params, (err, rows) => {
        if (err) {
            console.error('Database error:', err);
            return res.status(500).json({ error: 'Database error' });
        }
        
        // Business logic: à¸„à¸³à¸™à¸§à¸“à¸ªà¸–à¸´à¸•à¸´ (à¸›à¸™à¸à¸±à¸šà¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡)
        const available = rows.filter(b => b.status === 'available').length;
        const borrowed = rows.filter(b => b.status === 'borrowed').length;
        
        res.json({
            books: rows,
            statistics: { available, borrowed, total: rows.length }
        });
    });
});

// GET /api/books/:id - à¸”à¸¶à¸‡à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¹€à¸¥à¹ˆà¸¡à¹€à¸”à¸µà¸¢à¸§
app.get('/api/books/:id', (req, res) => {
    const id = parseInt(req.params.id);
    
    // Validation
    if (isNaN(id)) {
        return res.status(400).json({ error: 'Invalid book ID' });
    }
    
    // Database query
    db.get('SELECT * FROM books WHERE id = ?', [id], (err, row) => {
        if (err) {
            console.error('Database error:', err);
            return res.status(500).json({ error: 'Database error' });
        }
        
        if (!row) {
            return res.status(404).json({ error: 'Book not found' });
        }
        
        res.json(row);
    });
});

// POST /api/books - à¹€à¸à¸´à¹ˆà¸¡à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¹ƒà¸«à¸¡à¹ˆ
app.post('/api/books', (req, res) => {
    const { title, author, isbn } = req.body;
    
    // Validation (à¸›à¸™à¸à¸±à¸š HTTP handling)
    if (!title || !author || !isbn) {
        return res.status(400).json({ 
            error: 'Title, author, and ISBN are required' 
        });
    }
    
    // Business logic: validate ISBN format (à¸›à¸™à¸à¸±à¸šà¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡)
    const isbnPattern = /^(97[89])?\d{9}[\dXx]$/;
    if (!isbnPattern.test(isbn.replace(/-/g, ''))) {
        return res.status(400).json({ 
            error: 'Invalid ISBN format' 
        });
    }
    
    // Database insert (à¸›à¸™à¸à¸±à¸šà¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡)
    const sql = 'INSERT INTO books (title, author, isbn) VALUES (?, ?, ?)';
    
    db.run(sql, [title, author, isbn], function(err) {
        if (err) {
            if (err.message.includes('UNIQUE')) {
                return res.status(409).json({ 
                    error: 'ISBN already exists' 
                });
            }
            console.error('Database error:', err);
            return res.status(500).json({ error: 'Database error' });
        }
        
        // Get the created book
        db.get('SELECT * FROM books WHERE id = ?', [this.lastID], (err, row) => {
            if (err) {
                return res.status(500).json({ error: 'Database error' });
            }
            res.status(201).json(row);
        });
    });
});

// PUT /api/books/:id - à¸­à¸±à¸à¹€à¸”à¸—à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­
app.put('/api/books/:id', (req, res) => {
    const id = parseInt(req.params.id);
    const { title, author, isbn } = req.body;
    
    // Validation
    if (isNaN(id)) {
        return res.status(400).json({ error: 'Invalid book ID' });
    }
    
    if (!title || !author || !isbn) {
        return res.status(400).json({ 
            error: 'Title, author, and ISBN are required' 
        });
    }
    
    // Business logic: validate ISBN
    const isbnPattern = /^(97[89])?\d{9}[\dXx]$/;
    if (!isbnPattern.test(isbn.replace(/-/g, ''))) {
        return res.status(400).json({ error: 'Invalid ISBN format' });
    }
    
    // Check if book exists
    db.get('SELECT * FROM books WHERE id = ?', [id], (err, row) => {
        if (err) {
            return res.status(500).json({ error: 'Database error' });
        }
        
        if (!row) {
            return res.status(404).json({ error: 'Book not found' });
        }
        
        // Update book
        const sql = 'UPDATE books SET title = ?, author = ?, isbn = ? WHERE id = ?';
        
        db.run(sql, [title, author, isbn, id], function(err) {
            if (err) {
                if (err.message.includes('UNIQUE')) {
                    return res.status(409).json({ 
                        error: 'ISBN already exists' 
                    });
                }
                return res.status(500).json({ error: 'Database error' });
            }
            
            // Return updated book
            db.get('SELECT * FROM books WHERE id = ?', [id], (err, updatedRow) => {
                if (err) {
                    return res.status(500).json({ error: 'Database error' });
                }
                res.json(updatedRow);
            });
        });
    });
});

// PATCH /api/books/:id/borrow - à¸¢à¸·à¸¡à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­
app.patch('/api/books/:id/borrow', (req, res) => {
    const id = parseInt(req.params.id);
    
    if (isNaN(id)) {
        return res.status(400).json({ error: 'Invalid book ID' });
    }
    
    // Check if book exists and available
    db.get('SELECT * FROM books WHERE id = ?', [id], (err, row) => {
        if (err) {
            return res.status(500).json({ error: 'Database error' });
        }
        
        if (!row) {
            return res.status(404).json({ error: 'Book not found' });
        }
        
        // Business logic: check if already borrowed
        if (row.status === 'borrowed') {
            return res.status(400).json({ 
                error: 'Book is already borrowed' 
            });
        }
        
        // Update status to borrowed
        db.run('UPDATE books SET status = ? WHERE id = ?', 
            ['borrowed', id], 
            function(err) {
                if (err) {
                    return res.status(500).json({ error: 'Database error' });
                }
                
                // Return updated book
                db.get('SELECT * FROM books WHERE id = ?', [id], (err, updatedRow) => {
                    if (err) {
                        return res.status(500).json({ error: 'Database error' });
                    }
                    res.json(updatedRow);
                });
            }
        );
    });
});

// PATCH /api/books/:id/return - à¸„à¸·à¸™à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­
app.patch('/api/books/:id/return', (req, res) => {
    const id = parseInt(req.params.id);
    
    if (isNaN(id)) {
        return res.status(400).json({ error: 'Invalid book ID' });
    }
    
    // Check if book exists
    db.get('SELECT * FROM books WHERE id = ?', [id], (err, row) => {
        if (err) {
            return res.status(500).json({ error: 'Database error' });
        }
        
        if (!row) {
            return res.status(404).json({ error: 'Book not found' });
        }
        
        // Business logic: check if not borrowed
        if (row.status !== 'borrowed') {
            return res.status(400).json({ 
                error: 'Book is not borrowed' 
            });
        }
        
        // Update status to available
        db.run('UPDATE books SET status = ? WHERE id = ?', 
            ['available', id], 
            function(err) {
                if (err) {
                    return res.status(500).json({ error: 'Database error' });
                }
                
                // Return updated book
                db.get('SELECT * FROM books WHERE id = ?', [id], (err, updatedRow) => {
                    if (err) {
                        return res.status(500).json({ error: 'Database error' });
                    }
                    res.json(updatedRow);
                });
            }
        );
    });
});

// DELETE /api/books/:id - à¸¥à¸šà¸«à¸™à¸±à¸‡à¸ªà¸·à¸­
app.delete('/api/books/:id', (req, res) => {
    const id = parseInt(req.params.id);
    
    if (isNaN(id)) {
        return res.status(400).json({ error: 'Invalid book ID' });
    }
    
    // Business logic: cannot delete borrowed book
    db.get('SELECT * FROM books WHERE id = ?', [id], (err, row) => {
        if (err) {
            return res.status(500).json({ error: 'Database error' });
        }
        
        if (!row) {
            return res.status(404).json({ error: 'Book not found' });
        }
        
        if (row.status === 'borrowed') {
            return res.status(400).json({ 
                error: 'Cannot delete borrowed book' 
            });
        }
        
        // Delete book
        db.run('DELETE FROM books WHERE id = ?', [id], function(err) {
            if (err) {
                return res.status(500).json({ error: 'Database error' });
            }
            
            res.json({ message: 'Book deleted successfully' });
        });
    });
});

// Start server
const PORT = 3000;
app.listen(PORT, () => {
    console.log(`Library Management System running on http://localhost:${PORT}`);
});
```

---

## ğŸ“ à¸‡à¸²à¸™à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸—à¸³ (à¸„à¸°à¹à¸™à¸™à¸£à¸§à¸¡ 15 à¸„à¸°à¹à¸™à¸™)

### **à¸ªà¹ˆà¸§à¸™à¸—à¸µà¹ˆ 1: Refactor à¹€à¸›à¹‡à¸™ Layered Architecture (7 à¸„à¸°à¹à¸™à¸™)**

à¸„à¸¸à¸“à¸•à¹‰à¸­à¸‡ Refactor à¹‚à¸„à¹‰à¸” Monolithic à¸‚à¹‰à¸²à¸‡à¸•à¹‰à¸™à¹€à¸›à¹‡à¸™ **Layered Architecture (3-tier)** à¹‚à¸”à¸¢à¹à¸šà¹ˆà¸‡à¹€à¸›à¹‡à¸™:

#### **1.1 à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ (1 à¸„à¸°à¹à¸™à¸™)**

à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸”à¸±à¸‡à¸™à¸µà¹‰:

```
midterm-individual-<à¸£à¸«à¸±à¸ªà¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²>/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ presentation/              # Layer 1: Presentation
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â””â”€â”€ bookRoutes.js     # à¸à¸³à¸«à¸™à¸” routes
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â””â”€â”€ bookController.js  # Handle HTTP requests/responses
â”‚   â”‚   â””â”€â”€ middlewares/
â”‚   â”‚       â””â”€â”€ errorHandler.js    # Error handling middleware
â”‚   â”‚
â”‚   â”œâ”€â”€ business/                  # Layer 2: Business Logic
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ bookService.js     # Business logic & rules
â”‚   â”‚   â””â”€â”€ validators/
â”‚   â”‚       â””â”€â”€ bookValidator.js   # Validation logic
â”‚   â”‚
â”‚   â””â”€â”€ data/                      # Layer 3: Data Access
â”‚       â”œâ”€â”€ repositories/
â”‚       â”‚   â””â”€â”€ bookRepository.js  # Database operations
â”‚       â””â”€â”€ database/
â”‚           â””â”€â”€ connection.js      # Database connection
â”‚
â”œâ”€â”€ server.js                      # Entry point
â”œâ”€â”€ package.json
â”œâ”€â”€ library.db                     # SQLite database
â””â”€â”€ README.md                      # Documentation
```

#### **1.2 Implement Presentation Layer (2 à¸„à¸°à¹à¸™à¸™)**

**ğŸ“ `src/presentation/controllers/bookController.js`**

à¹ƒà¸«à¹‰à¸„à¸¸à¸“à¸ªà¸£à¹‰à¸²à¸‡ Controller à¸—à¸µà¹ˆ:
- à¸£à¸±à¸š HTTP request
- à¹€à¸£à¸µà¸¢à¸à¹ƒà¸Šà¹‰ Service
- à¸ªà¹ˆà¸‡ HTTP response

**à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡ code skeleton à¸—à¸µà¹ˆà¹ƒà¸«à¹‰:**

```javascript
// src/presentation/controllers/bookController.js
const bookService = require('../../business/services/bookService');

class BookController {
    // TODO: Implement getAllBooks
    async getAllBooks(req, res, next) {
        try {
            const { status } = req.query;
            // à¹€à¸£à¸µà¸¢à¸ bookService.getAllBooks()
            // à¸ªà¹ˆà¸‡ response à¸à¸¥à¸±à¸š
        } catch (error) {
            next(error);
        }
    }

    // TODO: Implement getBookById
    async getBookById(req, res, next) {
        // à¹ƒà¸«à¹‰à¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²à¹€à¸‚à¸µà¸¢à¸™à¹€à¸­à¸‡
    }

    // TODO: Implement createBook
    async createBook(req, res, next) {
        // à¹ƒà¸«à¹‰à¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²à¹€à¸‚à¸µà¸¢à¸™à¹€à¸­à¸‡
    }

    // TODO: Implement updateBook
    async updateBook(req, res, next) {
        // à¹ƒà¸«à¹‰à¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²à¹€à¸‚à¸µà¸¢à¸™à¹€à¸­à¸‡
    }

    // TODO: Implement borrowBook
    async borrowBook(req, res, next) {
        // à¹ƒà¸«à¹‰à¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²à¹€à¸‚à¸µà¸¢à¸™à¹€à¸­à¸‡
    }

    // TODO: Implement returnBook
    async returnBook(req, res, next) {
        // à¹ƒà¸«à¹‰à¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²à¹€à¸‚à¸µà¸¢à¸™à¹€à¸­à¸‡
    }

    // TODO: Implement deleteBook
    async deleteBook(req, res, next) {
        // à¹ƒà¸«à¹‰à¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²à¹€à¸‚à¸µà¸¢à¸™à¹€à¸­à¸‡
    }
}

module.exports = new BookController();
```

**ğŸ“ `src/presentation/routes/bookRoutes.js`**

```javascript
// src/presentation/routes/bookRoutes.js
const express = require('express');
const router = express.Router();
const bookController = require('../controllers/bookController');

// TODO: Define routes
// GET /api/books
router.get('/', bookController.getAllBooks);

// GET /api/books/:id
// POST /api/books
// PUT /api/books/:id
// PATCH /api/books/:id/borrow
// PATCH /api/books/:id/return
// DELETE /api/books/:id

// à¹ƒà¸«à¹‰à¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²à¹€à¸‚à¸µà¸¢à¸™à¹€à¸­à¸‡à¸•à¹ˆà¸­à¸—à¸µà¹ˆà¸™à¸µà¹ˆ

module.exports = router;
```

**ğŸ“ `src/presentation/middlewares/errorHandler.js`**

```javascript
// src/presentation/middlewares/errorHandler.js
function errorHandler(err, req, res, next) {
    console.error('Error:', err.message);
    
    // TODO: Handle different error types
    // - ValidationError â†’ 400
    // - NotFoundError â†’ 404
    // - ConflictError â†’ 409
    // - Default â†’ 500
    
    res.status(500).json({
        error: err.message || 'Internal server error'
    });
}

module.exports = errorHandler;
```

#### **1.3 Implement Business Layer (2 à¸„à¸°à¹à¸™à¸™)**

**ğŸ“ `src/business/services/bookService.js`**

à¹ƒà¸«à¹‰à¸„à¸¸à¸“à¸ªà¸£à¹‰à¸²à¸‡ Service à¸—à¸µà¹ˆ:
- à¸£à¸±à¸š data à¸ˆà¸²à¸ Controller
- Validate à¸œà¹ˆà¸²à¸™ Validator
- à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥ Business logic
- à¹€à¸£à¸µà¸¢à¸ Repository à¹€à¸à¸·à¹ˆà¸­à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡ Database
- Return à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œà¸à¸¥à¸±à¸šà¹„à¸›à¸—à¸µà¹ˆ Controller

**Code skeleton:**

```javascript
// src/business/services/bookService.js
const bookRepository = require('../../data/repositories/bookRepository');
const bookValidator = require('../validators/bookValidator');

class BookService {
    // TODO: Implement getAllBooks
    async getAllBooks(status = null) {
        // 1. à¸–à¹‰à¸²à¸¡à¸µ status à¹ƒà¸«à¹‰ validate
        // 2. à¹€à¸£à¸µà¸¢à¸ bookRepository.findAll(status)
        // 3. à¸„à¸³à¸™à¸§à¸“à¸ªà¸–à¸´à¸•à¸´ (available, borrowed, total)
        // 4. return { books, statistics }
    }

    // TODO: Implement getBookById
    async getBookById(id) {
        // 1. Validate ID
        // 2. à¹€à¸£à¸µà¸¢à¸ repository
        // 3. à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¹€à¸ˆà¸­ throw NotFoundError
        // 4. return book
    }

    // TODO: Implement createBook
    async createBook(bookData) {
        // 1. Validate book data
        // 2. Validate ISBN format
        // 3. à¹€à¸£à¸µà¸¢à¸ repository.create()
        // 4. return created book
    }

    // TODO: Implement updateBook
    async updateBook(id, bookData) {
        // à¹ƒà¸«à¹‰à¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²à¹€à¸‚à¸µà¸¢à¸™à¹€à¸­à¸‡
    }

    // TODO: Implement borrowBook
    async borrowBook(id) {
        // 1. à¸”à¸¶à¸‡à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸ˆà¸²à¸ repository
        // 2. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸² status = 'available' à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ
        // 3. à¸–à¹‰à¸² borrowed à¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§ throw error
        // 4. à¹€à¸£à¸µà¸¢à¸ repository.updateStatus(id, 'borrowed')
        // 5. return updated book
    }

    // TODO: Implement returnBook
    async returnBook(id) {
        // à¹ƒà¸«à¹‰à¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²à¹€à¸‚à¸µà¸¢à¸™à¹€à¸­à¸‡ (à¸„à¸¥à¹‰à¸²à¸¢à¸à¸±à¸š borrowBook)
    }

    // TODO: Implement deleteBook
    async deleteBook(id) {
        // 1. à¸”à¸¶à¸‡à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸ˆà¸²à¸ repository
        // 2. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸² status à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ 'borrowed'
        // 3. à¸–à¹‰à¸² borrowed à¸«à¹‰à¸²à¸¡à¸¥à¸š throw error
        // 4. à¹€à¸£à¸µà¸¢à¸ repository.delete(id)
    }
}

module.exports = new BookService();
```

**ğŸ“ `src/business/validators/bookValidator.js`**

```javascript
// src/business/validators/bookValidator.js
class BookValidator {
    validateBookData(data) {
        const { title, author, isbn } = data;
        
        if (!title || !author || !isbn) {
            throw new Error('Title, author, and ISBN are required');
        }
        
        return true;
    }
    
    validateISBN(isbn) {
        // TODO: Validate ISBN format
        // Pattern: (978|979) + 9 digits + (digit or X)
        const isbnPattern = /^(97[89])?\d{9}[\dXx]$/;
        const cleanISBN = isbn.replace(/-/g, '');
        
        if (!isbnPattern.test(cleanISBN)) {
            throw new Error('Invalid ISBN format');
        }
        
        return true;
    }
    
    validateId(id) {
        const numId = parseInt(id);
        if (isNaN(numId) || numId <= 0) {
            throw new Error('Invalid book ID');
        }
        return numId;
    }
}

module.exports = new BookValidator();
```

#### **1.4 Implement Data Layer (2 à¸„à¸°à¹à¸™à¸™)**

**ğŸ“ `src/data/database/connection.js`**

```javascript
// src/data/database/connection.js
const sqlite3 = require('sqlite3').verbose();
const path = require('path');

const dbPath = path.join(__dirname, '../../../library.db');

const db = new sqlite3.Database(dbPath, (err) => {
    if (err) {
        console.error('Database connection error:', err);
    } else {
        console.log('Connected to SQLite database');
        initializeDatabase();
    }
});

function initializeDatabase() {
    db.run(`CREATE TABLE IF NOT EXISTS books (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        title TEXT NOT NULL,
        author TEXT NOT NULL,
        isbn TEXT UNIQUE NOT NULL,
        status TEXT DEFAULT 'available',
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
    )`);
}

module.exports = db;
```

**ğŸ“ `src/data/repositories/bookRepository.js`**

```javascript
// src/data/repositories/bookRepository.js
const db = require('../database/connection');

class BookRepository {
    // TODO: Implement findAll
    async findAll(status = null) {
        return new Promise((resolve, reject) => {
            let sql = 'SELECT * FROM books';
            let params = [];
            
            if (status) {
                sql += ' WHERE status = ?';
                params.push(status);
            }
            
            db.all(sql, params, (err, rows) => {
                if (err) reject(err);
                else resolve(rows);
            });
        });
    }

    // TODO: Implement findById
    async findById(id) {
        return new Promise((resolve, reject) => {
            db.get('SELECT * FROM books WHERE id = ?', [id], (err, row) => {
                if (err) reject(err);
                else resolve(row);
            });
        });
    }

    // TODO: Implement create
    async create(bookData) {
        const { title, author, isbn } = bookData;
        
        return new Promise((resolve, reject) => {
            const sql = 'INSERT INTO books (title, author, isbn) VALUES (?, ?, ?)';
            
            db.run(sql, [title, author, isbn], function(err) {
                if (err) {
                    reject(err);
                } else {
                    // Return the created book
                    db.get('SELECT * FROM books WHERE id = ?', [this.lastID], (err, row) => {
                        if (err) reject(err);
                        else resolve(row);
                    });
                }
            });
        });
    }

    // TODO: Implement update
    async update(id, bookData) {
        // à¹ƒà¸«à¹‰à¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²à¹€à¸‚à¸µà¸¢à¸™à¹€à¸­à¸‡
        // return Promise
    }

    // TODO: Implement updateStatus
    async updateStatus(id, status) {
        return new Promise((resolve, reject) => {
            db.run('UPDATE books SET status = ? WHERE id = ?', 
                [status, id], 
                function(err) {
                    if (err) {
                        reject(err);
                    } else {
                        // Return updated book
                        db.get('SELECT * FROM books WHERE id = ?', [id], (err, row) => {
                            if (err) reject(err);
                            else resolve(row);
                        });
                    }
                }
            );
        });
    }

    // TODO: Implement delete
    async delete(id) {
        return new Promise((resolve, reject) => {
            db.run('DELETE FROM books WHERE id = ?', [id], function(err) {
                if (err) reject(err);
                else resolve({ message: 'Book deleted successfully' });
            });
        });
    }
}

module.exports = new BookRepository();
```

#### **1.5 Update server.js (Entry Point)**

**ğŸ“ `server.js`**

```javascript
// server.js
const express = require('express');
const bookRoutes = require('./src/presentation/routes/bookRoutes');
const errorHandler = require('./src/presentation/middlewares/errorHandler');

const app = express();

// Middleware
app.use(express.json());
app.use(express.static('public'));

// Routes
app.use('/api/books', bookRoutes);

// Error handling (à¸•à¹‰à¸­à¸‡à¸­à¸¢à¸¹à¹ˆà¸—à¹‰à¸²à¸¢à¸ªà¸¸à¸”)
app.use(errorHandler);

// Start server
const PORT = 3000;
app.listen(PORT, () => {
    console.log(`Library Management System running on http://localhost:${PORT}`);
});
```

---

### **à¸ªà¹ˆà¸§à¸™à¸—à¸µà¹ˆ 2: Documentation (3 à¸„à¸°à¹à¸™à¸™)**

#### **2.1 à¸ªà¸£à¹‰à¸²à¸‡ README.md (1.5 à¸„à¸°à¹à¸™à¸™)**

à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ `README.md` à¸—à¸µà¹ˆà¸­à¸˜à¸´à¸šà¸²à¸¢:

```markdown
# Library Management System - Layered Architecture

## ğŸ“‹ Project Information
- **Student Name:** [à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥]
- **Student ID:** [à¸£à¸«à¸±à¸ªà¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²]
- **Course:** ENGSE207 Software Architecture

## ğŸ—ï¸ Architecture Style
Layered Architecture (3-tier)

## ğŸ“‚ Project Structure
[à¸­à¸˜à¸´à¸šà¸²à¸¢à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ]

## ğŸ¯ Refactoring Summary

### à¸›à¸±à¸à¸«à¸²à¸‚à¸­à¸‡ Monolithic (à¹€à¸”à¸´à¸¡):
- [à¸£à¸°à¸šà¸¸à¸›à¸±à¸à¸«à¸² 3-5 à¸‚à¹‰à¸­]

### à¸§à¸´à¸˜à¸µà¹à¸à¹‰à¹„à¸‚à¸”à¹‰à¸§à¸¢ Layered Architecture:
- [à¸­à¸˜à¸´à¸šà¸²à¸¢à¸§à¸´à¸˜à¸µà¹à¸à¹‰à¹à¸•à¹ˆà¸¥à¸°à¸›à¸±à¸à¸«à¸²]

### à¸›à¸£à¸°à¹‚à¸¢à¸Šà¸™à¹Œà¸—à¸µà¹ˆà¹„à¸”à¹‰à¸£à¸±à¸š:
- [à¸£à¸°à¸šà¸¸à¸›à¸£à¸°à¹‚à¸¢à¸Šà¸™à¹Œ 3-5 à¸‚à¹‰à¸­]

## ğŸš€ How to Run

\`\`\`bash
# 1. Clone repository
git clone [your-repo-url]

# 2. Install dependencies
npm install

# 3. Run server
npm start

# 4. Test API
# Open browser: http://localhost:3000
\`\`\`

## ğŸ“ API Endpoints
[à¸£à¸°à¸šà¸¸ API endpoints à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”]
```

#### **2.2 à¸ªà¸£à¹‰à¸²à¸‡ Architecture Diagram (1.5 à¸„à¸°à¹à¸™à¸™)**
**à¹à¸™à¸§à¸—à¸²à¸‡à¸—à¸³à¹€à¸­à¸à¸ªà¸²à¸£** [WORKSHOP_ARCHITECTURE_GUIDE](../workshop_exam_guide/WORKSHOP_ARCHITECTURE_GUIDE.md)

à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ `ARCHITECTURE.md` à¸—à¸µà¹ˆà¸¡à¸µ:

1. **C1 Context** 
2. **C2 Contrainer Diagram à¹à¸ªà¸”à¸‡à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡ Layered Architecture**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Presentation Layer              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Routes â†’ Controllers         â”‚   â”‚
â”‚  â”‚ (HTTP Handling)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Business Logic Layer            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Services â†’ Validators        â”‚   â”‚
â”‚  â”‚ (Business Rules)             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Data Access Layer               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Repositories â†’ Database      â”‚   â”‚
â”‚  â”‚ (SQL Queries)                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  SQLite  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

3. **à¸­à¸˜à¸´à¸šà¸²à¸¢ Responsibilities à¸‚à¸­à¸‡à¹à¸•à¹ˆà¸¥à¸° Layer**

4. **à¸­à¸˜à¸´à¸šà¸²à¸¢ Data Flow** (Request â†’ Response)

---

## ğŸ“¤ à¸à¸²à¸£à¸ªà¹ˆà¸‡à¸‡à¸²à¸™ (CRITICAL - à¸­à¹ˆà¸²à¸™à¹ƒà¸«à¹‰à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”!)

### **à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸à¸²à¸£à¸ªà¹ˆà¸‡à¸‡à¸²à¸™:**

#### **Step 1: Setup Git Repository**

```bash
# 1. à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œà¸•à¸²à¸¡à¸£à¸¹à¸›à¹à¸šà¸š
mkdir midterm-individual-<à¸£à¸«à¸±à¸ªà¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²>
cd midterm-individual-<à¸£à¸«à¸±à¸ªà¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²>

# à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:
# midterm-individual-6531503001

# 2. Initialize Git
git init

# 3. à¸ªà¸£à¹‰à¸²à¸‡ .gitignore
echo "node_modules/
*.db
.env
.DS_Store" > .gitignore

# 4. Add remote (à¹ƒà¸Šà¹‰ repo à¸—à¸µà¹ˆà¸­à¸²à¸ˆà¸²à¸£à¸¢à¹Œà¸à¸³à¸«à¸™à¸”)
git remote add origin https://github.com/RMUTL-ENGSE207/midterm-2568-<à¸£à¸«à¸±à¸ªà¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²>.git
```

#### **Step 2: Develop & Commit**

```bash
# 1. à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œà¹à¸¥à¸°à¹„à¸Ÿà¸¥à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”

# 2. Commit à¹à¸•à¹ˆà¸¥à¸°à¸ªà¹ˆà¸§à¸™à¸—à¸µà¹ˆà¸—à¸³à¹€à¸ªà¸£à¹‡à¸ˆ
git add .
git commit -m "feat: implement presentation layer"

git add .
git commit -m "feat: implement business layer"

git add .
git commit -m "feat: implement data layer"

git add .
git commit -m "docs: add README and architecture diagram"
```

#### **Step 3: Test Before Submit**

```bash
# 1. à¸—à¸”à¸ªà¸­à¸šà¸§à¹ˆà¸² server à¸£à¸±à¸™à¹„à¸”à¹‰
npm start

# 2. à¸—à¸”à¸ªà¸­à¸š API à¸—à¸¸à¸à¸•à¸±à¸§à¸”à¹‰à¸§à¸¢ Thunder Client à¸«à¸£à¸·à¸­ Postman
# - GET /api/books
# - GET /api/books/:id
# - POST /api/books
# - PUT /api/books/:id
# - PATCH /api/books/:id/borrow
# - PATCH /api/books/:id/return
# - DELETE /api/books/:id

# 3. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¹„à¸¡à¹ˆà¸¡à¸µ error
```

#### **Step 4: Final Push**

```bash
# 1. Commit à¸„à¸£à¸±à¹‰à¸‡à¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢
git add .
git commit -m "chore: final submission"

# 2. Push to GitHub
git push -u origin main

# à¸–à¹‰à¸² push à¹„à¸¡à¹ˆà¹„à¸”à¹‰ (force push):
# git push -u origin main --force
```

#### **Step 5: Verify Submission**

```bash
# 1. à¹€à¸›à¸´à¸” GitHub repository
# 2. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¹„à¸Ÿà¸¥à¹Œà¸„à¸£à¸šà¸–à¹‰à¸§à¸™:
#    âœ… src/ folder (à¸—à¸±à¹‰à¸‡ 3 layers)
#    âœ… server.js
#    âœ… package.json
#    âœ… README.md
#    âœ… ARCHITECTURE.md
#    âœ… .gitignore
#
# 3. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š commits (à¸„à¸§à¸£à¸¡à¸µà¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 4-5 commits)
```

#### **Step 6: Submit GitHub Link**

à¸ªà¹ˆà¸‡ GitHub repository URL à¸œà¹ˆà¸²à¸™à¸£à¸°à¸šà¸š LMS:
```
https://github.com/RMUTL-ENGSE207/midterm-2568-<à¸£à¸«à¸±à¸ªà¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²>
```

---

## âœ… Checklist à¸à¹ˆà¸­à¸™à¸ªà¹ˆà¸‡à¸‡à¸²à¸™

à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¸—à¸³à¸„à¸£à¸šà¸—à¸¸à¸à¸‚à¹‰à¸­à¸à¹ˆà¸­à¸™à¸ªà¹ˆà¸‡:

### Code Implementation (7 à¸„à¸°à¹à¸™à¸™)
- [ ] à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œà¸„à¸£à¸šà¸–à¹‰à¸§à¸™ (1 à¸„à¸°à¹à¸™à¸™)
- [ ] Presentation Layer à¸—à¸³à¸‡à¸²à¸™à¹„à¸”à¹‰à¸„à¸£à¸šà¸—à¸¸à¸ API (2 à¸„à¸°à¹à¸™à¸™)
- [ ] Business Layer à¸—à¸³à¸‡à¸²à¸™à¹„à¸”à¹‰à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ (2 à¸„à¸°à¹à¸™à¸™)
- [ ] Data Layer à¸—à¸³à¸‡à¸²à¸™à¹„à¸”à¹‰à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ (2 à¸„à¸°à¹à¸™à¸™)

### Documentation (3 à¸„à¸°à¹à¸™à¸™)
- [ ] README.md à¸„à¸£à¸šà¸–à¹‰à¸§à¸™ (1.5 à¸„à¸°à¹à¸™à¸™)
- [ ] ARCHITECTURE.md à¸¡à¸µ Diagram à¹à¸¥à¸°à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢ (1.5 à¸„à¸°à¹à¸™à¸™)

### Git & Submission
- [ ] à¸Šà¸·à¹ˆà¸­à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: `midterm-individual-<à¸£à¸«à¸±à¸ªà¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²>`
- [ ] à¸¡à¸µ .gitignore (à¹„à¸¡à¹ˆ commit node_modules/, *.db)
- [ ] à¸¡à¸µ commits à¸«à¸¥à¸²à¸¢à¹† à¸„à¸£à¸±à¹‰à¸‡ (à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ 1 commit à¹€à¸”à¸µà¸¢à¸§)
- [ ] Push à¹„à¸›à¸—à¸µà¹ˆ GitHub à¸ªà¸³à¹€à¸£à¹‡à¸ˆ
- [ ] à¸ªà¹ˆà¸‡ GitHub URL à¸œà¹ˆà¸²à¸™ LMS

### Testing
- [ ] Server à¸£à¸±à¸™à¹„à¸”à¹‰ (`npm start`)
- [ ] API à¸—à¸¸à¸à¸•à¸±à¸§à¸—à¸³à¸‡à¸²à¸™à¹„à¸”à¹‰à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡
- [ ] à¹„à¸¡à¹ˆà¸¡à¸µ error à¹ƒà¸™ console

---

## ğŸ¯ à¹€à¸à¸“à¸‘à¹Œà¸à¸²à¸£à¹ƒà¸«à¹‰à¸„à¸°à¹à¸™à¸™

### à¸ªà¹ˆà¸§à¸™à¸—à¸µà¹ˆ 1: Code Implementation (7 à¸„à¸°à¹à¸™à¸™)

| à¸«à¸±à¸§à¸‚à¹‰à¸­ | à¸„à¸°à¹à¸™à¸™ | à¹€à¸à¸“à¸‘à¹Œ |
|--------|-------|-------|
| **à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ** | 1 | - à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸£à¸šà¸–à¹‰à¸§à¸™à¸•à¸²à¸¡à¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸” (0.5)<br>- à¹à¸¢à¸ layer à¸Šà¸±à¸”à¹€à¸ˆà¸™ (0.5) |
| **Presentation Layer** | 2 | - Controller à¸„à¸£à¸šà¸—à¸¸à¸ function (0.8)<br>- Routes à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ (0.4)<br>- Error handling (0.4)<br>- Code clean & readable (0.4) |
| **Business Layer** | 2 | - Service logic à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ (0.8)<br>- Validation à¸„à¸£à¸šà¸–à¹‰à¸§à¸™ (0.6)<br>- Business rules (borrow/return/delete) (0.6) |
| **Data Layer** | 2 | - Repository functions à¸„à¸£à¸š (0.8)<br>- Database queries à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ (0.6)<br>- Promise handling à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ (0.6) |

### à¸ªà¹ˆà¸§à¸™à¸—à¸µà¹ˆ 2: Documentation (3 à¸„à¸°à¹à¸™à¸™)

| à¸«à¸±à¸§à¸‚à¹‰à¸­ | à¸„à¸°à¹à¸™à¸™ | à¹€à¸à¸“à¸‘à¹Œ |
|--------|-------|-------|
| **README.md** | 1.5 | - à¸„à¸£à¸šà¸–à¹‰à¸§à¸™à¸—à¸¸à¸à¸«à¸±à¸§à¸‚à¹‰à¸­ (0.6)<br>- à¸­à¸˜à¸´à¸šà¸²à¸¢à¸›à¸±à¸à¸«à¸²à¹à¸¥à¸°à¸§à¸´à¸˜à¸µà¹à¸à¹‰à¸Šà¸±à¸”à¹€à¸ˆà¸™ (0.5)<br>- à¸¡à¸µ API endpoints (0.4) |
| **ARCHITECTURE.md** | 1.5 | - à¸¡à¸µ Architecture Diagram (0.7)<br>- à¸­à¸˜à¸´à¸šà¸²à¸¢ responsibilities à¸‚à¸­à¸‡à¹à¸•à¹ˆà¸¥à¸° layer (0.4)<br>- à¸­à¸˜à¸´à¸šà¸²à¸¢ data flow (0.4) |

### à¸«à¸±à¸à¸„à¸°à¹à¸™à¸™

| à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸” | à¸«à¸±à¸à¸„à¸°à¹à¸™à¸™ |
|------------|----------|
| à¹„à¸¡à¹ˆà¸¡à¸µ .gitignore à¸«à¸£à¸·à¸­ commit node_modules/ | -0.5 |
| Commit à¹€à¸”à¸µà¸¢à¸§à¸ˆà¸š (à¹„à¸¡à¹ˆ commit à¹€à¸›à¹‡à¸™à¸£à¸°à¸¢à¸°) | -0.5 |
| à¸Šà¸·à¹ˆà¸­à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œà¸œà¸´à¸” | -0.3 |
| Code à¹„à¸¡à¹ˆà¸£à¸±à¸™à¹„à¸”à¹‰ | -2 |
| API à¸šà¸²à¸‡à¸•à¸±à¸§à¹„à¸¡à¹ˆà¸—à¸³à¸‡à¸²à¸™ | -0.5 à¸•à¹ˆà¸­ API |
| à¸ªà¹ˆà¸‡à¸‡à¸²à¸™à¸Šà¹‰à¸²à¸à¸§à¹ˆà¸²à¸à¸³à¸«à¸™à¸” | -1 à¸•à¹ˆà¸­à¸§à¸±à¸™ |

---

## ğŸ’¡ Tips & Hints

### à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£ Refactor:

1. **à¹€à¸£à¸´à¹ˆà¸¡à¸ˆà¸²à¸ Data Layer** - à¸—à¸³ Repository à¹à¸¥à¸° Database connection à¸à¹ˆà¸­à¸™
2. **à¸•à¹ˆà¸­à¸”à¹‰à¸§à¸¢ Business Layer** - à¸¢à¹‰à¸²à¸¢ Business logic à¹à¸¥à¸° Validation
3. **à¸ˆà¸šà¸—à¸µà¹ˆ Presentation Layer** - à¸¢à¹‰à¸²à¸¢ HTTP handling

### à¸ªà¸³à¸«à¸£à¸±à¸š Debugging:

```javascript
// à¹€à¸à¸´à¹ˆà¸¡ console.log à¹€à¸à¸·à¹ˆà¸­ debug
console.log('[Controller] Received request:', req.body);
console.log('[Service] Processing:', data);
console.log('[Repository] Query result:', result);
```

### à¸ªà¸³à¸«à¸£à¸±à¸š Error Handling:

```javascript
// à¹ƒà¸Šà¹‰ try-catch à¸—à¸¸à¸ async function
try {
    const result = await someAsyncFunction();
    return result;
} catch (error) {
    console.error('Error:', error);
    throw error; // à¸ªà¹ˆà¸‡à¸•à¹ˆà¸­à¹„à¸›à¹ƒà¸«à¹‰ error handler
}
```

---

## â° Time Management (90 à¸™à¸²à¸—à¸µ)

| Task | Time | à¸„à¸³à¹à¸™à¸°à¸™à¸³ |
|------|------|---------|
| à¸­à¹ˆà¸²à¸™à¹‚à¸ˆà¸—à¸¢à¹Œà¹à¸¥à¸°à¸—à¸³à¸„à¸§à¸²à¸¡à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ | 10 à¸™à¸²à¸—à¸µ | à¸­à¹ˆà¸²à¸™à¹ƒà¸«à¹‰à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”! |
| Setup Git & à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡ | 10 à¸™à¸²à¸—à¸µ | à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œà¸„à¸£à¸šà¸à¹ˆà¸­à¸™ |
| Data Layer | 20 à¸™à¸²à¸—à¸µ | à¸—à¸³ Repository à¸à¹ˆà¸­à¸™ |
| Business Layer | 20 à¸™à¸²à¸—à¸µ | Validator + Service |
| Presentation Layer | 20 à¸™à¸²à¸—à¸µ | Controller + Routes |
| Documentation | 10 à¸™à¸²à¸—à¸µ | README + Diagram |
| Testing & Git Push | 10 à¸™à¸²à¸—à¸µ | à¸—à¸”à¸ªà¸­à¸šà¹à¸¥à¸°à¸ªà¹ˆà¸‡à¸‡à¸²à¸™ |

---

## ğŸ†˜ à¸–à¹‰à¸²à¸¡à¸µà¸›à¸±à¸à¸«à¸²

1. **Server à¹„à¸¡à¹ˆà¸£à¸±à¸™** â†’ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š `require()` path à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
2. **API à¹„à¸¡à¹ˆà¸—à¸³à¸‡à¸²à¸™** â†’ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š routes mapping
3. **Database error** â†’ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š connection.js
4. **Git push à¹„à¸¡à¹ˆà¹„à¸”à¹‰** â†’ à¹ƒà¸Šà¹‰ `--force` flag (à¸£à¸°à¸§à¸±à¸‡!)
5. **à¹„à¸¡à¹ˆà¹à¸™à¹ˆà¹ƒà¸ˆ** â†’ à¸–à¸²à¸¡à¸­à¸²à¸ˆà¸²à¸£à¸¢à¹Œà¸œà¸¹à¹‰à¸„à¸¸à¸¡à¸ªà¸­à¸š

---

## ğŸ“ à¸•à¸´à¸”à¸•à¹ˆà¸­

à¸«à¸²à¸à¸¡à¸µà¸›à¸±à¸à¸«à¸²à¹ƒà¸™à¸à¸²à¸£à¸ªà¹ˆà¸‡à¸‡à¸²à¸™:
- ğŸ“§ Email: [à¸­à¸µà¹€à¸¡à¸¥à¸­à¸²à¸ˆà¸²à¸£à¸¢à¹Œ]
- ğŸ’¬ LINE: [LINE ID à¸­à¸²à¸ˆà¸²à¸£à¸¢à¹Œ]

---

## ğŸ”” à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸à¸ªà¸³à¸„à¸±à¸

1. **à¸«à¹‰à¸²à¸¡à¸¥à¸­à¸à¸‡à¸²à¸™à¹€à¸à¸·à¹ˆà¸­à¸™** - à¸£à¸°à¸šà¸šà¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¸à¸²à¸£à¸¥à¸­à¸ (plagiarism detection)
2. **Open Book/Internet/AI** - à¹ƒà¸Šà¹‰à¹„à¸”à¹‰ à¹à¸•à¹ˆà¸•à¹‰à¸­à¸‡à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¹‚à¸„à¹‰à¸”à¸—à¸µà¹ˆà¹€à¸‚à¸µà¸¢à¸™
3. **à¸ªà¹ˆà¸‡à¸‡à¸²à¸™à¸•à¸£à¸‡à¹€à¸§à¸¥à¸²** - à¹€à¸¥à¸¢à¹€à¸§à¸¥à¸²à¸«à¸±à¸à¸„à¸°à¹à¸™à¸™
4. **Test à¸à¹ˆà¸­à¸™à¸ªà¹ˆà¸‡** - Code à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸£à¸±à¸™à¹„à¸”à¹‰à¸ˆà¸°à¸–à¸¹à¸à¸«à¸±à¸à¸„à¸°à¹à¸™à¸™à¸«à¸™à¸±à¸

---

**à¸‚à¸­à¹ƒà¸«à¹‰à¸ªà¸­à¸šà¹€à¸›à¹‡à¸™à¹„à¸›à¸”à¹‰à¸§à¸¢à¸”à¸µà¹à¸¥à¸°à¹‚à¸Šà¸„à¸”à¸µ! ğŸ€**

---

**à¸ˆà¸±à¸”à¸—à¸³à¹‚à¸”à¸¢:** à¸­à¸²à¸ˆà¸²à¸£à¸¢à¹Œà¸˜à¸™à¸´à¸• à¹€à¸à¸•à¸¸à¹à¸à¹‰à¸§  
**à¸§à¸´à¸Šà¸²:** ENGSE207 à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸‹à¸­à¸Ÿà¸•à¹Œà¹à¸§à¸£à¹Œ  
**à¸ à¸²à¸„à¹€à¸£à¸µà¸¢à¸™à¸—à¸µà¹ˆ:** 2/2568
