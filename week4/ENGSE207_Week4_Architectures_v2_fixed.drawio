<mxfile host="Electron" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.0.3 Chrome/140.0.7339.249 Electron/38.7.0 Safari/537.36" version="29.0.3" pages="12">
  <diagram id="hf_q6sUYUeaWd1zR9tJc" name="Microservices Ecosystem">
    <mxGraphModel dx="2490" dy="782" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-1" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="-710" y="130" width="160" height="240" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-2" value="Mobile App" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontStyle=1" parent="Y6pRtvREKn-1RcIZ28h9-1" vertex="1">
          <mxGeometry x="20" y="20" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-3" value="Web SPA&lt;br&gt;(React.js)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontStyle=1" parent="Y6pRtvREKn-1RcIZ28h9-1" vertex="1">
          <mxGeometry x="20" y="100" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-4" value="IoT Device" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontStyle=1" parent="Y6pRtvREKn-1RcIZ28h9-1" vertex="1">
          <mxGeometry x="20" y="180" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-5" value="API Gateway Layer (Ingress)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;startSize=23;" parent="1" vertex="1">
          <mxGeometry x="-490" y="130" width="200" height="240" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-6" value="&lt;b&gt;API Gateway&lt;/b&gt;&lt;br&gt;(Kong / NGINX)&lt;br&gt;&lt;br&gt;• Rate Limiting&lt;br&gt;• Auth Validation&lt;br&gt;• SSL Termination" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#6c8ebf;" parent="Y6pRtvREKn-1RcIZ28h9-5" vertex="1">
          <mxGeometry x="30" y="60" width="140" height="140" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-7" value="Microservices Layer (Internal Network)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;startSize=23;" parent="1" vertex="1">
          <mxGeometry x="-210" y="90" width="480" height="320" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-8" value="Auth Service&lt;br&gt;(OAuth2/OIDC)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="Y6pRtvREKn-1RcIZ28h9-7" vertex="1">
          <mxGeometry x="30" y="50" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-9" value="User Service&lt;br&gt;(Node.js)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;" parent="Y6pRtvREKn-1RcIZ28h9-7" vertex="1">
          <mxGeometry x="30" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-10" value="Order Service&lt;br&gt;(Java Spring)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;" parent="Y6pRtvREKn-1RcIZ28h9-7" vertex="1">
          <mxGeometry x="190" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-11" value="Payment Svc&lt;br&gt;(GoLang)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#82b366;" parent="Y6pRtvREKn-1RcIZ28h9-7" vertex="1">
          <mxGeometry x="110" y="235" width="110" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-12" value="Service Discovery&lt;br&gt;(Consul)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=10;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" parent="Y6pRtvREKn-1RcIZ28h9-7" vertex="1">
          <mxGeometry x="350" y="235" width="80" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-13" value="Persistence Layer (Polyglot)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;startSize=23;" parent="1" vertex="1">
          <mxGeometry x="-210" y="450" width="480" height="120" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-14" value="User DB&lt;br&gt;(MongoDB)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=11;fillColor=#ffffff;strokeColor=#9673a6;" parent="Y6pRtvREKn-1RcIZ28h9-13" vertex="1">
          <mxGeometry x="40" y="40" width="100" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-15" value="Order DB&lt;br&gt;(PostgreSQL)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=11;fillColor=#ffffff;strokeColor=#9673a6;" parent="Y6pRtvREKn-1RcIZ28h9-13" vertex="1">
          <mxGeometry x="320" y="40" width="100" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-16" value="Cache&lt;br&gt;(Redis)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=11;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="Y6pRtvREKn-1RcIZ28h9-13" vertex="1">
          <mxGeometry x="160" y="40" width="100" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-17" value="Event Bus / Message Broker (Apache Kafka)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#333333;strokeColor=#333333;fontColor=#FFFFFF;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="-680" y="600" width="950" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-18" value="HTTPS" style="endArrow=classic;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="Y6pRtvREKn-1RcIZ28h9-6" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-570" y="260" as="sourcePoint" />
            <mxPoint x="-520" y="210" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-19" value="REST/gRPC" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Y6pRtvREKn-1RcIZ28h9-6" target="Y6pRtvREKn-1RcIZ28h9-9" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-310" y="260" as="sourcePoint" />
            <mxPoint x="-260" y="210" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-20" value="" style="endArrow=classic;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Y6pRtvREKn-1RcIZ28h9-9" target="Y6pRtvREKn-1RcIZ28h9-14" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="20" y="300" as="sourcePoint" />
            <mxPoint x="70" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-21" value="" style="endArrow=classic;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Y6pRtvREKn-1RcIZ28h9-10" target="Y6pRtvREKn-1RcIZ28h9-15" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="300" as="sourcePoint" />
            <mxPoint x="220" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-22" value="Pub/Sub" style="endArrow=classic;startArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.81;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="Y6pRtvREKn-1RcIZ28h9-10" target="Y6pRtvREKn-1RcIZ28h9-17" edge="1">
          <mxGeometry x="-0.105" y="-7" width="50" height="50" relative="1" as="geometry">
            <mxPoint x="120" y="430" as="sourcePoint" />
            <mxPoint x="170" y="380" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Y6pRtvREKn-1RcIZ28h9-23" value="Validate" style="endArrow=classic;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="Y6pRtvREKn-1RcIZ28h9-6" target="Y6pRtvREKn-1RcIZ28h9-8" edge="1">
          <mxGeometry x="-0.0007" width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-380" y="160" as="sourcePoint" />
            <mxPoint x="-330" y="110" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="w4p1" name="01-Microservices-Concept">
    <mxGraphModel dx="1663" dy="782" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="t1" value="Microservices Architecture – Concept Overview" style="text;html=1;align=center;verticalAlign=middle;fontSize=20;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="300" y="60" width="450" height="40" as="geometry" />
        </mxCell>
        <mxCell id="c1" value="Client / User" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;strokeColor=#1d4ed8;fillColor=#dbeafe;fontSize=14" parent="1" vertex="1">
          <mxGeometry x="467.5" y="120" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="g1" value="API Gateway&#xa;(Single Entry Point)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;strokeColor=#0f766e;fillColor=#ccfbf1;fontSize=14" parent="1" vertex="1">
          <mxGeometry x="462.5" y="210" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="e1" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="c1" target="g1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="m0" value="Business Microservices" style="shape=swimlane;rounded=1;whiteSpace=wrap;html=1;fontSize=13;strokeColor=#15803d;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="250" y="320" width="590" height="230" as="geometry" />
        </mxCell>
        <mxCell id="m1" value="User Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#16a34a;fillColor=#ecfdf3" parent="m0" vertex="1">
          <mxGeometry x="20" y="60" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="m2" value="Product Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#16a34a;fillColor=#ecfdf3" parent="m0" vertex="1">
          <mxGeometry x="235" y="60" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="m3" value="Order Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#16a34a;fillColor=#ecfdf3" parent="m0" vertex="1">
          <mxGeometry x="430" y="60" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="m4" value="Payment Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#16a34a;fillColor=#ecfdf3" parent="m0" vertex="1">
          <mxGeometry x="125" y="150" width="110" height="54" as="geometry" />
        </mxCell>
        <mxCell id="m5" value="Notification Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#16a34a;fillColor=#ecfdf3" parent="m0" vertex="1">
          <mxGeometry x="340" y="150" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="e2" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="g1" target="m0" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint y="-20" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="d1" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;User DB" style="shape=cylinder;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#1d4ed8;fillColor=#e0ebff" parent="1" vertex="1">
          <mxGeometry x="275" y="580" width="90" height="60" as="geometry" />
        </mxCell>
        <mxCell id="d2" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;Product DB" style="shape=cylinder;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#1d4ed8;fillColor=#e0ebff" parent="1" vertex="1">
          <mxGeometry x="500" y="580" width="95" height="60" as="geometry" />
        </mxCell>
        <mxCell id="d3" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;Order DB" style="shape=cylinder;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#1d4ed8;fillColor=#e0ebff" parent="1" vertex="1">
          <mxGeometry x="705" y="580" width="90" height="60" as="geometry" />
        </mxCell>
        <mxCell id="d4" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;Payment DB" style="shape=cylinder;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#1d4ed8;fillColor=#e0ebff" parent="1" vertex="1">
          <mxGeometry x="385" y="580" width="90" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ed1" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="m1" target="d1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ed2" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="m2" target="d2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ed3" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="m3" target="d3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ed4" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="m4" target="d4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="note1" value="&lt;b&gt;คุณลักษณะสำคัญของ Microservices:&lt;br&gt;&lt;/b&gt;• Small, autonomous services&lt;br&gt;• Own database per service&lt;br&gt;• Independent deployment&lt;br&gt;• สื่อสารผ่าน API / Messaging" style="shape=note;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4b5563;fillColor=#fef9c3;align=left;size=14;spacingLeft=10;" parent="1" vertex="1">
          <mxGeometry x="240" y="190" width="200" height="90" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="w4p2" name="02-Evolution-Monolith-to-Cloud">
    <mxGraphModel dx="1663" dy="782" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="t2" value="Evolution of Architectural Styles" style="text;html=1;align=center;verticalAlign=middle;fontSize=20;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="330" y="100" width="370" height="40" as="geometry" />
        </mxCell>
        <mxCell id="tl" value="" style="shape=line;strokeWidth=3;strokeColor=#4b5563" parent="1" edge="1">
          <mxGeometry x="120" y="200" width="900" relative="1" as="geometry">
            <mxPoint x="120" y="220" as="sourcePoint" />
            <mxPoint x="1020" y="220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mono" value="Monolith" style="shape=ellipse;whiteSpace=wrap;html=1;strokeColor=#7c3aed;fillColor=#ede9fe;fontSize=13" parent="1" vertex="1">
          <mxGeometry x="105" y="180" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="monoNote" value="• Single deployable&lt;br&gt;• เหมาะกับ MVP / ทีมเล็ก&lt;br&gt;• โตแล้ว refactor ยาก" style="text;whiteSpace=wrap;html=1;fontSize=11" parent="1" vertex="1">
          <mxGeometry x="105" y="275" width="130" height="55" as="geometry" />
        </mxCell>
        <mxCell id="layered" value="3-Layer / N-Tier" style="shape=ellipse;whiteSpace=wrap;html=1;strokeColor=#0ea5e9;fillColor=#e0f2fe;fontSize=13" parent="1" vertex="1">
          <mxGeometry x="260" y="180" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="layeredNote" value="• แยก Presentation / Business / Data&lt;br&gt;• จัดการ responsibilities ง่ายขึ้น" style="text;whiteSpace=wrap;html=1;fontSize=11" parent="1" vertex="1">
          <mxGeometry x="250" y="275" width="190" height="55" as="geometry" />
        </mxCell>
        <mxCell id="soa" value="Service-Oriented (SOA)" style="shape=ellipse;whiteSpace=wrap;html=1;strokeColor=#10b981;fillColor=#dcfce7;fontSize=13" parent="1" vertex="1">
          <mxGeometry x="440" y="180" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="soaNote" value="• Enterprise Services&lt;br&gt;• ESB, SOAP/REST&lt;br&gt;• เหมาะกับ integration &lt;br&gt;&amp;nbsp; &amp;nbsp;ในองค์กรใหญ่" style="text;whiteSpace=wrap;html=1;fontSize=11" parent="1" vertex="1">
          <mxGeometry x="460" y="275" width="120" height="75" as="geometry" />
        </mxCell>
        <mxCell id="micro" value="Microservices" style="shape=ellipse;whiteSpace=wrap;html=1;strokeColor=#f97316;fillColor=#ffedd5;fontSize=13" parent="1" vertex="1">
          <mxGeometry x="640" y="180" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="microNote2" value="• Bounded Context&lt;br&gt;• Database per Service&lt;br&gt;• Independent deployment&lt;br&gt;• ต้องการ DevOps / Monitoring" style="text;whiteSpace=wrap;html=1;fontSize=11" parent="1" vertex="1">
          <mxGeometry x="640" y="275" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="srv" value="Serverless" style="shape=ellipse;whiteSpace=wrap;html=1;strokeColor=#ef4444;fillColor=#fee2e2;fontSize=13" parent="1" vertex="1">
          <mxGeometry x="810" y="180" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="srvNote" value="• Functions as a Service&lt;br&gt;• Pay-per-use, Auto-scale&lt;br&gt;• เหมาะกับงาน &lt;br&gt;&amp;nbsp; &amp;nbsp;event-based / background" style="text;whiteSpace=wrap;html=1;fontSize=11" parent="1" vertex="1">
          <mxGeometry x="820" y="275" width="150" height="75" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="w4p3" name="03-Monolith-vs-Microservices">
    <mxGraphModel dx="1663" dy="782" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="t3" value="Monolith vs Microservices" style="text;html=1;align=center;verticalAlign=middle;fontSize=20;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="347.5" y="20" width="347.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="monoBox" value="&lt;b&gt;Traditional Monolith&lt;/b&gt;" style="shape=swimlane;rounded=1;whiteSpace=wrap;html=1;fontSize=13;strokeColor=#6366f1;fillColor=#e0e7ff" parent="1" vertex="1">
          <mxGeometry x="200" y="80" width="260" height="280" as="geometry" />
        </mxCell>
        <mxCell id="monoUi" value="UI Layer" style="shape=rectangle;rounded=0;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4f46e5;fillColor=#eef2ff" parent="monoBox" vertex="1">
          <mxGeometry x="17.5" y="55" width="225" height="60" as="geometry" />
        </mxCell>
        <mxCell id="monoBiz" value="Business Logic Layer" style="shape=rectangle;rounded=0;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4f46e5;fillColor=#e0e7ff" parent="monoBox" vertex="1">
          <mxGeometry x="17.5" y="135" width="225" height="60" as="geometry" />
        </mxCell>
        <mxCell id="monoData" value="Data Access Layer" style="shape=rectangle;rounded=0;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4f46e5;fillColor=#c7d2fe" parent="monoBox" vertex="1">
          <mxGeometry x="17.5" y="215" width="225" height="50" as="geometry" />
        </mxCell>
        <mxCell id="monoDb" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;Shared Database" style="shape=cylinder;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4f46e5;fillColor=#e0e7ff" parent="1" vertex="1">
          <mxGeometry x="270" y="390" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="mcCluster" value="&lt;b&gt;Microservices&lt;/b&gt;" style="shape=swimlane;rounded=1;whiteSpace=wrap;html=1;fontSize=13;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="560" y="80" width="470" height="250" as="geometry" />
        </mxCell>
        <mxCell id="svcUser" value="User Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#ecfdf3" parent="mcCluster" vertex="1">
          <mxGeometry x="10" y="65" width="110" height="60" as="geometry" />
        </mxCell>
        <mxCell id="svcOrder" value="Order Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#ecfdf3" parent="mcCluster" vertex="1">
          <mxGeometry x="180" y="65" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="svcPayment" value="Payment Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#ecfdf3" parent="mcCluster" vertex="1">
          <mxGeometry x="345" y="65" width="115" height="60" as="geometry" />
        </mxCell>
        <mxCell id="svcNotif" value="Notification Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#ecfdf3" parent="mcCluster" vertex="1">
          <mxGeometry x="100" y="155" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="svcReport" value="Reporting Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#ecfdf3" parent="mcCluster" vertex="1">
          <mxGeometry x="260" y="155" width="110" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dbUser" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;User DB" style="shape=cylinder;whiteSpace=wrap;html=1;fontSize=10;strokeColor=#1d4ed8;fillColor=#dbeafe" parent="1" vertex="1">
          <mxGeometry x="575" y="370" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dbOrder" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;Order DB" style="shape=cylinder;whiteSpace=wrap;html=1;fontSize=10;strokeColor=#1d4ed8;fillColor=#dbeafe" parent="1" vertex="1">
          <mxGeometry x="747.5" y="370" width="105" height="61" as="geometry" />
        </mxCell>
        <mxCell id="dbPayment" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;Payment DB" style="shape=cylinder;whiteSpace=wrap;html=1;fontSize=10;strokeColor=#1d4ed8;fillColor=#dbeafe" parent="1" vertex="1">
          <mxGeometry x="912.5" y="370" width="100" height="61" as="geometry" />
        </mxCell>
        <mxCell id="edMono" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="monoBox" target="monoDb" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edU" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="svcUser" target="dbUser" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edO" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="svcOrder" target="dbOrder" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edP" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="svcPayment" target="dbPayment" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="monoPros" value="&lt;b&gt;&amp;nbsp; &amp;nbsp;Monolith เหมาะเมื่อ:&lt;/b&gt;&lt;br&gt;• ทีมเล็ก, MVP&lt;br&gt;• Domain ยังไม่ชัด&lt;br&gt;• ยังไม่มี DevOps พร้อม" style="shape=note;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4b5563;fillColor=#fef9c3;align=left;size=21;spacingLeft=10;" parent="1" vertex="1">
          <mxGeometry x="260" y="470" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="mcPros" value="&lt;b&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; Microservices เหมาะเมื่อ:&lt;/b&gt;&lt;br&gt;• Domain ซับซ้อน, หลาย bounded contexts&lt;br&gt;• ทีมหลายทีม&lt;br&gt;• ต้องการ deploy แยก, scale แยก" style="shape=note;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4b5563;fillColor=#dcfce7;align=left;size=21;spacingLeft=10;" parent="1" vertex="1">
          <mxGeometry x="695" y="460" width="230" height="90" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="w4p4" name="04-Event-Driven-Pattern">
    <mxGraphModel dx="1663" dy="782" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="t4" value="Event-Driven Architecture – Core Pattern" style="text;html=1;align=center;verticalAlign=middle;fontSize=20;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="310" y="60" width="440" height="40" as="geometry" />
        </mxCell>
        <mxCell id="p1" value="Event Producer&#xa;(e.g., Order Service)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=13;strokeColor=#2563eb;fillColor=#dbeafe" parent="1" vertex="1">
          <mxGeometry x="200" y="180" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="bus" value="Event Bus / Message Broker&#xa;(Kafka, RabbitMQ, SNS/SQS)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=13;strokeColor=#b91c1c;fillColor=#fee2e2" parent="1" vertex="1">
          <mxGeometry x="470" y="170" width="220" height="100" as="geometry" />
        </mxCell>
        <mxCell id="cA" value="Notification Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="810" y="80" width="170" height="70" as="geometry" />
        </mxCell>
        <mxCell id="cB" value="Analytics Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="810" y="190" width="170" height="70" as="geometry" />
        </mxCell>
        <mxCell id="cC" value="Reporting / Data Warehouse" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="810" y="310" width="170" height="70" as="geometry" />
        </mxCell>
        <mxCell id="evPub" value="publish(Event)" style="endArrow=block;html=1;strokeColor=#111827;fontSize=11" parent="1" source="p1" target="bus" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="evC1" value="Event Stream" style="endArrow=block;html=1;strokeColor=#111827;fontSize=11;entryX=0;entryY=0.671;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="bus" target="cA" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="810" y="143" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="evC2" value="Event Stream" style="endArrow=block;html=1;strokeColor=#111827;fontSize=11" parent="1" source="bus" target="cB" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="evC3" value="Event Stream" style="endArrow=block;html=1;strokeColor=#111827;fontSize=11;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="bus" target="cC" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="noteA" value="ข้อดี:&lt;br&gt;• Loose Coupling ระหว่างบริการ&lt;br&gt;• สามารถเพิ่ม consumer ใหม่ได้โดยไม่กระทบ Producer&lt;br&gt;• รองรับ async / high throughput" style="shape=note;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4b5563;fillColor=#fef9c3;align=left;size=22;spacingLeft=10;" parent="1" vertex="1">
          <mxGeometry x="135" y="300" width="280" height="80" as="geometry" />
        </mxCell>
        <mxCell id="noteB" value="ข้อควรระวัง:&lt;br&gt;• Debug ยาก (ไม่มี call stack ชัดเจน)&lt;br&gt;• Consistency มักเป็น eventual consistency&lt;br&gt;• ต้องออกแบบ error handling, retry, DLQ ดีๆ" style="shape=note;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4b5563;fillColor=#fee2e2;align=left;size=20;spacingLeft=10;" parent="1" vertex="1">
          <mxGeometry x="470" y="305" width="230" height="80" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="w4p5" name="05-TaskBoard-Microservices-EDA">
    <mxGraphModel dx="1663" dy="782" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="t5" value="ENGSE207 Task Board – Microservices + Event-Driven" style="text;html=1;align=center;verticalAlign=middle;fontSize=18;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="150" y="40" width="730" height="40" as="geometry" />
        </mxCell>
        <mxCell id="tbClient" value="Web / Mobile Client" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=13;strokeColor=#2563eb;fillColor=#dbeafe" parent="1" vertex="1">
          <mxGeometry x="120" y="145" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="tbGateway" value="API Gateway / BFF" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=13;strokeColor=#0f766e;fillColor=#ccfbf1" parent="1" vertex="1">
          <mxGeometry x="320" y="145" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="tbEdge1" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="tbClient" target="tbGateway" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tbSvcBox" value="&lt;b&gt;Core Services&lt;/b&gt;" style="shape=swimlane;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="500" y="100" width="410" height="250" as="geometry" />
        </mxCell>
        <mxCell id="tbUser" value="User Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#ecfdf3" parent="tbSvcBox" vertex="1">
          <mxGeometry x="15" y="95" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tbBoard" value="Board / Task Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#ecfdf3" parent="tbSvcBox" vertex="1">
          <mxGeometry x="160" y="50" width="135" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tbNotif" value="Notification Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#ecfdf3" parent="tbSvcBox" vertex="1">
          <mxGeometry x="15" y="170" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tbAnalytics" value="Analytics Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#ecfdf3" parent="tbSvcBox" vertex="1">
          <mxGeometry x="270" y="120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tbEdge2" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="tbGateway" target="tbBoard" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tbBus" value="Event Bus / Topic: task-events" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#b91c1c;fillColor=#fee2e2" parent="1" vertex="1">
          <mxGeometry x="635" y="390" width="182.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tbEv1" value="TaskCreated, TaskCompleted" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10" parent="1" source="tbBoard" target="tbBus" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tbEv2" value="subscribe(TaskCreated)" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10;exitX=0.25;exitY=0;exitDx=0;exitDy=0;" parent="1" source="tbBus" target="tbNotif" edge="1">
          <mxGeometry x="-0.0543" y="17" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tbEv3" value="subscribe(Task*)" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10;exitX=0.789;exitY=0.025;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="tbBus" target="tbAnalytics" edge="1">
          <mxGeometry x="-0.5385" y="-10" relative="1" as="geometry">
            <mxPoint x="780" y="400" as="sourcePoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="tbNote" value="&lt;b&gt;Use Case:&lt;/b&gt;&lt;br&gt;เมื่อสร้างงานใหม่ (TaskCreated) → ส่ง event ไปยัง Notification Service เพื่อ push แจ้งเตือน&lt;br&gt;พร้อมทั้ง Analytics Service เก็บสถิติ สำหรับ Dashboard" style="shape=note;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4b5563;fillColor=#fef9c3;align=left;size=22;spacingLeft=10;" parent="1" vertex="1">
          <mxGeometry x="160" y="250" width="270" height="90" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="w4p6" name="06-EventSourcing-CQRS">
    <mxGraphModel dx="1663" dy="782" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="t6" value="Event Sourcing + CQRS" style="text;html=1;align=center;verticalAlign=middle;fontSize=20;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="340" y="30" width="340" height="40" as="geometry" />
        </mxCell>
        <mxCell id="writeBox" value="&lt;b&gt;Write Side (Commands)&lt;/b&gt;" style="shape=swimlane;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#2563eb;fillColor=#dbeafe" parent="1" vertex="1">
          <mxGeometry x="130" y="80" width="350" height="260" as="geometry" />
        </mxCell>
        <mxCell id="cmdApi" value="Command API" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#1d4ed8;fillColor=#eff6ff" parent="writeBox" vertex="1">
          <mxGeometry x="40" y="190" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="domain" value="Domain Model / Aggregate" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#1d4ed8;fillColor=#e0f2fe" parent="writeBox" vertex="1">
          <mxGeometry x="140" y="60" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eventStore" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;Event Store" style="shape=cylinder;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#b91c1c;fillColor=#fee2e2" parent="1" vertex="1">
          <mxGeometry x="450" y="390" width="100" height="67" as="geometry" />
        </mxCell>
        <mxCell id="wEdge1" value="Command (CreateOrder, CancelOrder, ...)" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10" parent="1" source="cmdApi" target="domain" edge="1">
          <mxGeometry x="-0.5811" y="26" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wEdge2" value="append(Events)" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10" parent="1" source="domain" target="eventStore" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="readBox" value="&lt;b&gt;Read Side (Queries)&lt;/b&gt;" style="shape=swimlane;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="560" y="80" width="420" height="260" as="geometry" />
        </mxCell>
        <mxCell id="proj1" value="Read Model: Orders by Status" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#ecfdf3" parent="readBox" vertex="1">
          <mxGeometry x="20" y="70" width="175" height="60" as="geometry" />
        </mxCell>
        <mxCell id="proj2" value="Read Model: Orders per Customer" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#ecfdf3" parent="readBox" vertex="1">
          <mxGeometry x="220" y="70" width="185" height="60" as="geometry" />
        </mxCell>
        <mxCell id="queryApi" value="Query API" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#15803d;fillColor=#bbf7d0" parent="readBox" vertex="1">
          <mxGeometry x="140" y="160" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="rsEdge1" value="subscribe events" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10" parent="1" source="eventStore" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="601" y="340" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="esNote" value="&lt;b&gt;Event Sourcing:&lt;/b&gt;&lt;br&gt;• เก็บทุก event ที่เกิดขึ้น&lt;br&gt;• Audit Trail สมบูรณ์, replay ได้&lt;br&gt;• ใช้ในระบบการเงิน, logistics, analytics" style="shape=note;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4b5563;fillColor=#fef9c3;align=left;size=25;spacingLeft=10;" parent="1" vertex="1">
          <mxGeometry x="160" y="360.5" width="210" height="86" as="geometry" />
        </mxCell>
        <mxCell id="cqrsNote" value="&lt;b&gt;CQRS:&lt;/b&gt;&lt;br&gt;• แยก Write (Command) กับ Read (Query)&lt;br&gt;• Read model ปรับให้เหมาะกับการอ่าน&lt;br&gt;• scale read ได้ง่าย" style="shape=note;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4b5563;fillColor=#dcfce7;align=left;size=22;spacingLeft=10;" parent="1" vertex="1">
          <mxGeometry x="660" y="356.5" width="230" height="90" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="w4p7" name="07-Banking-Transfer-EDA">
    <mxGraphModel dx="1663" dy="782" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="t7" value="Mobile Banking – Event-Driven TransferCompleted" style="text;html=1;align=center;verticalAlign=middle;fontSize=18;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="160" y="60" width="730" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mbApp" value="Mobile App" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=13;strokeColor=#2563eb;fillColor=#dbeafe" parent="1" vertex="1">
          <mxGeometry x="90" y="195" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mbSvc" value="Transfer Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=13;strokeColor=#0f766e;fillColor=#ccfbf1" parent="1" vertex="1">
          <mxGeometry x="330" y="190" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="mbBus" value="Event Bus – Topic: transfer" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#b91c1c;fillColor=#fee2e2" parent="1" vertex="1">
          <mxGeometry x="620" y="190" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="mbSms" value="SMS Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="920" y="60" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mbEmail" value="Email Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="920" y="150" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mbAnal" value="Analytics Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="920" y="240" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mbLog" value="Audit / Logging Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="920" y="330" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="mbE1" value="โอนเงิน 1,000 บาท" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10" parent="1" source="mbApp" target="mbSvc" edge="1">
          <mxGeometry y="15" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mbE2" value="TransferCompleted Event" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10" parent="1" source="mbSvc" target="mbBus" edge="1">
          <mxGeometry x="-0.0041" y="17" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mbE3" value="TransferCompleted" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="mbBus" target="mbSms" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mbE4" value="TransferCompleted" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="mbBus" target="mbEmail" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mbE5" value="TransferCompleted" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="mbBus" target="mbAnal" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mbE6" value="TransferCompleted" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="mbBus" target="mbLog" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mbNote" value="&lt;b&gt;Business Flow:&lt;/b&gt;&lt;br&gt;1) User ส่งคำสั่งโอนเงินผ่าน Mobile App&lt;br&gt;2) Transfer Service ตรวจสอบ / หักยอด / บันทึก&lt;br&gt;3) ถ้าเรียบร้อย → publish TransferCompleted&lt;br&gt;4) Service อื่น ๆ subscribe เพื่อส่ง SMS, email, ทำ analytics, audit" style="shape=note;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4b5563;fillColor=#fef9c3;align=left;size=23;spacingLeft=10;" parent="1" vertex="1">
          <mxGeometry x="350" y="300" width="330" height="90" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="w4p8" name="08-Healthcare-Appointment-EDA">
    <mxGraphModel dx="1663" dy="782" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="t8" value="Healthcare Platform – AppointmentCreated Event Flow" style="text;html=1;align=center;verticalAlign=middle;fontSize=18;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="260" y="50" width="490" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hpPatient" value="Patient App" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=13;strokeColor=#2563eb;fillColor=#dbeafe" parent="1" vertex="1">
          <mxGeometry x="130" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hpAppt" value="Appointment Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=13;strokeColor=#0f766e;fillColor=#ccfbf1" parent="1" vertex="1">
          <mxGeometry x="330" y="195" width="170" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hpBus" value="Event Bus – Topic: appointments" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#b91c1c;fillColor=#fee2e2" parent="1" vertex="1">
          <mxGeometry x="580" y="195" width="210" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hpNotif" value="Notification Service&lt;br&gt;(SMS / Email / Push)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="910" y="40" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hpDoctor" value="Doctor App" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="910" y="150" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hpPayment" value="Payment Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="910" y="260" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hpAnalytics" value="Analytics Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="910" y="370" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hpE1" value="Create &lt;br&gt;Appointment" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10" parent="1" source="hpPatient" target="hpAppt" edge="1">
          <mxGeometry y="15" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hpE2" value="Appointment&lt;br&gt;Created" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10" parent="1" source="hpAppt" target="hpBus" edge="1">
          <mxGeometry x="-0.0002" y="17" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hpE3" value="AppointmentCreated" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="hpBus" target="hpNotif" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hpE4" value="AppointmentCreated" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="hpBus" target="hpDoctor" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hpE5" value="AppointmentCreated" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10" parent="1" source="hpBus" target="hpPayment" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hpE6" value="AppointmentCreated" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="hpBus" target="hpAnalytics" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hpNote" value="&lt;b&gt;ตัวอย่างจริง: &lt;/b&gt;ระบบจองวัคซีน / นัดหมายแพทย์&lt;br&gt;• Patient จองคิว → AppointmentCreated&lt;br&gt;• ระบบแจ้งเตือนทั้งคนไข้และหมอ&lt;br&gt;• ชำระเงิน / Claim ประกัน / Analytics การใช้บริการ" style="shape=note;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4b5563;fillColor=#fef9c3;align=left;spacingLeft=10;" parent="1" vertex="1">
          <mxGeometry x="330" y="300" width="270" height="90" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="w4p9" name="09-Observability-Stack">
    <mxGraphModel dx="1663" dy="782" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="t9" value="Observability for Microservices – Logs, Metrics, Traces" style="text;html=1;align=center;verticalAlign=middle;fontSize=18;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="220" y="20" width="530" height="40" as="geometry" />
        </mxCell>
        <mxCell id="osSvc1" value="Service A" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#2563eb;fillColor=#dbeafe" parent="1" vertex="1">
          <mxGeometry x="140" y="80" width="110" height="60" as="geometry" />
        </mxCell>
        <mxCell id="osSvc2" value="Service B" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#2563eb;fillColor=#dbeafe" parent="1" vertex="1">
          <mxGeometry x="280" y="80" width="110" height="60" as="geometry" />
        </mxCell>
        <mxCell id="osSvc3" value="Service C" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#2563eb;fillColor=#dbeafe" parent="1" vertex="1">
          <mxGeometry x="447.5" y="80" width="105" height="60" as="geometry" />
        </mxCell>
        <mxCell id="osSvc4" value="Service D" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#2563eb;fillColor=#dbeafe" parent="1" vertex="1">
          <mxGeometry x="690" y="90" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="osAgent" value="Agent / Sidecar\n(Fluentd, Filebeat)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#0f766e;fillColor=#ccfbf1" parent="1" vertex="1">
          <mxGeometry x="160" y="190" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="osMetrics" value="Metrics Exporter\n(Prometheus)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#0f766e;fillColor=#ccfbf1" parent="1" vertex="1">
          <mxGeometry x="400" y="190" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="osTrace" value="Tracing SDK\n(OpenTelemetry)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#0f766e;fillColor=#ccfbf1" parent="1" vertex="1">
          <mxGeometry x="640" y="190" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="osLogStore" value="Log Store\n(Elasticsearch)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#b91c1c;fillColor=#fee2e2" parent="1" vertex="1">
          <mxGeometry x="160" y="300" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="osMetricStore" value="Time-Series DB\n(Prometheus TSDB)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#b91c1c;fillColor=#fee2e2" parent="1" vertex="1">
          <mxGeometry x="400" y="300" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="osTraceStore" value="Tracing Backend\n(Jaeger, Tempo)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#b91c1c;fillColor=#fee2e2" parent="1" vertex="1">
          <mxGeometry x="640" y="300" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="osUi" value="Dashboard &amp; Visualization\n(Kibana / Grafana)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#7c3aed;fillColor=#ede9fe" parent="1" vertex="1">
          <mxGeometry x="370" y="430" width="260" height="70" as="geometry" />
        </mxCell>
        <mxCell id="osE1" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="osSvc1" target="osAgent" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="osE2" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="osSvc2" target="osAgent" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="osE3" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="osSvc3" target="osMetrics" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="osE4" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="osSvc4" target="osTrace" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="osE5" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="osAgent" target="osLogStore" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="osE6" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="osMetrics" target="osMetricStore" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="osE7" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="osTrace" target="osTraceStore" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="osE8" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="osLogStore" target="osUi" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="osE9" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="osMetricStore" target="osUi" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="osE10" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="osTraceStore" target="osUi" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="w4p10" name="10-Serverless-Patterns">
    <mxGraphModel dx="1663" dy="782" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="t10" value="Serverless Architecture Patterns" style="text;html=1;align=center;verticalAlign=middle;fontSize=18;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="190" y="30" width="370" height="40" as="geometry" />
        </mxCell>
        <mxCell id="svHttp" value="HTTP API Trigger" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#2563eb;fillColor=#dbeafe" parent="1" vertex="1">
          <mxGeometry x="80" y="90" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="svFunc1" value="Function: Handle Request" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="300" y="90" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="svDb1" value="&lt;br&gt;DB / Storage" style="shape=cylinder;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4b5563;fillColor=#e5e7eb" parent="1" vertex="1">
          <mxGeometry x="520" y="85" width="110" height="70" as="geometry" />
        </mxCell>
        <mxCell id="svObj" value="&lt;br&gt;Object Storage &lt;br&gt;– /original/" style="shape=cylinder;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4b5563;fillColor=#e5e7eb" parent="1" vertex="1">
          <mxGeometry x="90" y="195" width="110" height="70" as="geometry" />
        </mxCell>
        <mxCell id="svFunc2" value="Function: Resize Image" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="300" y="195" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="svObjOut" value="&lt;br&gt;&lt;br&gt;&lt;br&gt;Object Storage &lt;br&gt;&amp;nbsp; &amp;nbsp; /thumbnails/ &lt;br&gt;&amp;nbsp; &amp;nbsp;/medium/ &lt;br&gt;&amp;nbsp; &amp;nbsp;/large/" style="shape=cylinder;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4b5563;fillColor=#e5e7eb;align=left;spacingLeft=20;" parent="1" vertex="1">
          <mxGeometry x="520" y="180" width="110" height="100" as="geometry" />
        </mxCell>
        <mxCell id="svCron" value="Cron / Schedule" style="shape=ellipse;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#2563eb;fillColor=#dbeafe" parent="1" vertex="1">
          <mxGeometry x="90" y="315" width="110" height="60" as="geometry" />
        </mxCell>
        <mxCell id="svFunc3" value="Function: Nightly Report" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="300" y="310" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="svEmailRpt" value="Email / Storage / Dashboard" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4b5563;fillColor=#e5e7eb" parent="1" vertex="1">
          <mxGeometry x="520" y="310" width="110" height="70" as="geometry" />
        </mxCell>
        <mxCell id="svE1" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="svHttp" target="svFunc1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="svE2" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="svFunc1" target="svDb1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="svE3" value="ObjectCreated" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10" parent="1" source="svObj" target="svFunc2" edge="1">
          <mxGeometry y="15" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="svE4" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="svFunc2" target="svObjOut" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="svE5" value="ทุกคืน 01:00" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10" parent="1" source="svCron" target="svFunc3" edge="1">
          <mxGeometry y="15" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="svE6" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="svFunc3" target="svEmailRpt" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="w4p11" name="11-Hybrid-Architecture-Decision">
    <mxGraphModel dx="1663" dy="782" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="t11" value="Hybrid Architecture: Monolith + Microservices + Event-Driven + Serverless" style="text;html=1;align=center;verticalAlign=middle;fontSize=18;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="120" y="20" width="900" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hyFront" value="Frontend (Web / Mobile / SPA)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#2563eb;fillColor=#dbeafe" parent="1" vertex="1">
          <mxGeometry x="140" y="100" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hyGw" value="API Gateway / BFF" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#0f766e;fillColor=#ccfbf1" parent="1" vertex="1">
          <mxGeometry x="410" y="100" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hyE1" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="hyFront" target="hyGw" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hyMicro" value="&lt;b&gt;Core Microservices&lt;/b&gt;" style="shape=swimlane;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#16a34a;fillColor=#dcfce7" parent="1" vertex="1">
          <mxGeometry x="680" y="80" width="340" height="200" as="geometry" />
        </mxCell>
        <mxCell id="hyMS1" value="User Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#ecfdf3" parent="hyMicro" vertex="1">
          <mxGeometry x="20" y="60" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="hyMS2" value="Product Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#ecfdf3" parent="hyMicro" vertex="1">
          <mxGeometry x="180" y="60" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="hyMS3" value="Order Service" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#16a34a;fillColor=#ecfdf3" parent="hyMicro" vertex="1">
          <mxGeometry x="100" y="130" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="hyE2" style="endArrow=block;html=1;strokeColor=#111827" parent="1" source="hyGw" target="hyMicro" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hyBus" value="Event Bus / Stream" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=12;strokeColor=#b91c1c;fillColor=#fee2e2" parent="1" vertex="1">
          <mxGeometry x="410" y="210" width="150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hyE3" value="Domain Events" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10" parent="1" source="hyMicro" target="hyBus" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hySv" value="Serverless Functions&lt;br&gt;(Notifications, Reports, Webhooks)" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#7c3aed;fillColor=#ede9fe" parent="1" vertex="1">
          <mxGeometry x="140" y="210" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="hyE4" value="Subscribe" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10" parent="1" source="hyBus" target="hySv" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hyLegacy" value="Legacy SOA / Core Banking / Government APIs" style="shape=rectangle;rounded=1;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#7f6000;fillColor=#fef3c7" parent="1" vertex="1">
          <mxGeometry x="712.5" y="340" width="275" height="66" as="geometry" />
        </mxCell>
        <mxCell id="hyE5" value="Integration via ESB / API" style="endArrow=block;html=1;strokeColor=#111827;fontSize=10" parent="1" source="hyMicro" target="hyLegacy" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hyDecision" value="&lt;b&gt;Decision Cheat Sheet:&lt;/b&gt;&lt;br&gt;• MVP / ทีมเล็ก → Monolith ดีๆ ก่อน\n• Domain ซับซ้อน + ทีมหลายทีม → Microservices + EDA&lt;br&gt;• งาน background / burst traffic → Serverless&lt;br&gt;• ระบบเดิมองค์กรใหญ่ → SOA / ESB + adapter" style="shape=note;whiteSpace=wrap;html=1;fontSize=11;strokeColor=#4b5563;fillColor=#fef9c3;align=left;spacingLeft=10;" parent="1" vertex="1">
          <mxGeometry x="140" y="315" width="480" height="91" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
